# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/globals.js
# version: v28.0.0
# last_commit: '2025-09-23T07:20:25+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END
/**
 * Gets current bundle's global scope identifier for React Refresh.
 * @param {Record<string, string>} runtimeGlobals The Webpack runtime globals.
 * @returns {string} The React Refresh global scope within the Webpack bundle.
 */
module.exports.getRefreshGlobalScope = (runtimeGlobals) => {
  return `${runtimeGlobals.require || '__webpack_require__'}.$Refresh$`;
};

/**
 * Gets current Webpack version according to features on the compiler instance.
 * @param {import('webpack').Compiler} compiler The current Webpack compiler instance.
 * @returns {number} The current Webpack version.
 */
module.exports.getWebpackVersion = (compiler) => {
  if (!compiler.hooks) {
    throw new Error(`[ReactRefreshPlugin] Webpack version is not supported!`);
  }

  // Webpack v5+ implements compiler caching
  return 'cache' in compiler ? 5 : 4;
};
