# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/postcss-flexbugs-fixes/bugs/bug81a.js
# version: v28.0.0
# last_commit: '2025-09-23T07:20:25+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END
var postcss = require('postcss');

module.exports = function(decl) {
  var regex = /(\d{1,}) (\d{1,}) (calc\(.*\))/g;
  var matches = regex.exec(decl.value);
  if (decl.prop === 'flex' && matches) {
    var grow = postcss.decl({
      prop: 'flex-grow',
      value: matches[1],
      source: decl.source
    });
    var shrink = postcss.decl({
      prop: 'flex-shrink',
      value: matches[2],
      source: decl.source
    });
    var basis = postcss.decl({
      prop: 'flex-basis',
      value: matches[3],
      source: decl.source
    });
    decl.parent.insertBefore(decl, grow);
    decl.parent.insertBefore(decl, shrink);
    decl.parent.insertBefore(decl, basis);
    decl.remove();
  }
};
