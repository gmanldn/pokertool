# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/exit/test/fixtures/log-broken.js
# version: v28.0.0
# last_commit: '2025-09-23T07:20:25+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END
var errorCode = process.argv[2];
var max = process.argv[3];
var modes = process.argv.slice(4);

function stdout(message) {
  if (modes.indexOf('stdout') === -1) { return; }
  process.stdout.write('stdout ' + message + '\n');
}

function stderr(message) {
  if (modes.indexOf('stderr') === -1) { return; }
  process.stderr.write('stderr ' + message + '\n');
}

for (var i = 0; i < max; i++) {
  stdout(i);
  stderr(i);
}

process.exit(errorCode);

stdout('fail');
stderr('fail');
