# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/adjust-sourcemap-loader/lib/process/to-reg-exp.js
# version: v28.0.0
# last_commit: '2025-09-23T07:20:25+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END
'use strict';

var regexParser = require('regex-parser');

var REGEXP = /(\/?)(.+)\1([a-z]*)/i;

/**
 * Parse the give value as a regular expression or give a pass-none expression where it is invalid
 * @param {RegExp|string|*} value An existing expression, or its string representation, or degenerate value
 * @returns {RegExp} The given expression or one matching the RegExp string else a pass-none expression
 */
function toRegExp(value) {
  return ((typeof value === 'object') && (typeof value.test === 'function') && value) ||
    ((typeof value === 'string') && REGEXP.test(value) && regexParser(value)) ||
    (/^true$|^$/.test(value) && /.*/) ||
    /matchnone^/;
}

module.exports = toRegExp;