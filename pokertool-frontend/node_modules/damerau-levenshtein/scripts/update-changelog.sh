#! /usr/bin/env bash
# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/damerau-levenshtein/scripts/update-changelog.sh
# version: v20.0.0
# last_commit: '2025-09-25T18:50:22+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END

set -euo pipefail

# To make it work on OSX (provided gnu-sed in installed)
if type gsed 2> /dev/null
then
  alias sed=gsed
fi


version=$(jq --raw-output ' .version ' "package.json")
date=$(date +%Y-%m-%d)

sed \
  --regexp-extended \
  --in-place="" \
  "s$^## \[Unreleased\]$\## [Unreleased\]\n\n\n## [${version}] - ${date}$" \
  CHANGELOG.md

git add CHANGELOG.md
