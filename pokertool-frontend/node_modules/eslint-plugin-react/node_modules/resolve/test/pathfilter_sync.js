# POKERTOOL-HEADER-START
# ---
# schema: pokerheader.v1
# project: pokertool
# file: pokertool-frontend/node_modules/eslint-plugin-react/node_modules/resolve/test/pathfilter_sync.js
# version: v20.0.0
# last_commit: '2025-09-23T07:20:25+01:00'
# fixes:
# - date: '2025-09-25'
#   summary: Enhanced enterprise documentation and comprehensive unit tests added
# ---
# POKERTOOL-HEADER-END
var test = require('tape');
var path = require('path');
var resolve = require('../');

test('synchronous pathfilter', function (t) {
    var res;
    var resolverDir = __dirname + '/pathfilter/deep_ref';
    var pathFilter = function (pkg, x, remainder) {
        t.equal(pkg.version, '1.2.3');
        t.equal(x, path.join(resolverDir, 'node_modules', 'deep', 'ref'));
        t.equal(remainder, 'ref');
        return 'alt';
    };

    res = resolve.sync('deep/ref', { basedir: resolverDir });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'ref.js'));

    res = resolve.sync('deep/deeper/ref', { basedir: resolverDir });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'deeper', 'ref.js'));

    res = resolve.sync('deep/ref', { basedir: resolverDir, pathFilter: pathFilter });
    t.equal(res, path.join(resolverDir, 'node_modules', 'deep', 'alt.js'));
    t.end();
});
